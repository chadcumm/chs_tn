<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="MPAGES_SVC_AUTH,XMLCCLREQUEST,APPLINK,MPAGES_EVENT,CCLLINK,CCLNEWWINDOW,CCLEVENT,CCLEKSREPLYOBJECT" name="discern"/>
<meta http-equiv="x-ua-compatible" content="IE=edge" />
<!--script type="text/javascript" src="%%MPAGE_CONTENT_URL%%/custom_mpage_content/jquery/jquery-3.6.0.min.js"></script-->
<script src="http://chs_tn.local/js/jquery/jquery-3.6.0.min.js"></script>

<!--COPY START HERE-->
<script type="text/javascript">
 
    function DisplayCDIAudit(CDIAuditData)  {
        console.log("starting DisplayCDIAudit")
 
        console.log(CDIAuditData)
 
        createTable(CDIAuditData.CDI_DEFINITION);

        console.log(JSON.stringify(CDIAuditTable))
        $("#CDIAuditTableHTML").html(CDIAuditTable.join(''))

        console.log("finishing DisplayCDIAudit")
    }
 
    function createTable(obj) {
        CDIAuditTable = [];
        CDIAuditTable.push("<table class=CDIAuditTable>")
        CDIAuditTable.push("<tr>")
        CDIAuditTable.push("<th colspan=4>CDI Definition</th>")
        CDIAuditTable.push("</tr>")

        CDIAuditTable.push("<tr>")
        CDIAuditTable.push("<th>Document Definition</th>")
        CDIAuditTable.push("<th>Coding Section</th>")
        CDIAuditTable.push("<th>Coding Definition Count</th>")
        CDIAuditTable.push("</tr>")

        for (i=0;i<obj.QUERY_CNT;i++)   {
            console.log("-->adding new row")
            CDIAuditTable.push("<tr><td colspan=4>")
            CDIAuditTable.push(obj.QUERY_QUAL[i].DISPLAY)
            CDIAuditTable.push("</td></tr>")

            CDIAuditTable.push("<tr>")
            CDIAuditTable.push("<td>")
                CDIAuditTable.push("<input type=textbox value='"+obj.QUERY_QUAL[i].DEFINITION+"'></input>")
            CDIAuditTable.push("</td>")
            
            CDIAuditTable.push("<td>")
                CDIAuditTable.push("<input type=textbox value='"+obj.QUERY_QUAL[i].CODING_SECTION+"'></input>")
            CDIAuditTable.push("</td>")

            CDIAuditTable.push("<td>")
                CDIAuditTable.push(obj.QUERY_QUAL[i].CODE_CNT)
            CDIAuditTable.push("</td>")
            CDIAuditTable.push("</tr>")
        }
        CDIAuditTable.push("</table>")
    }
</script>
 
<style>
 
    * {
        font-family: arial;
    }
 
    body {
        background-color: black;
        color: white;
    }
    @media screen and (prefers-color-scheme: light) {
        body {
            background-color: white;
            color: black;
        }
    }

    table.CDIAuditTable {
        margin: 5px;
        width: auto;
    }

    table.CDIAuditTable th, table.CDIAuditTable td  {
        text-align: left;
    }

</style>
</head>
 
<body>
    <div id="CDIAuditTableHTML"></div>
    
<!--COPY END HERE-->
    
    <script>
        /* Non-CCL Development */
        var CDIConfigData = $.getJSON('http://chs_tn.local/json/cdi_definitions/mock.json', function(data) {
            if (CDIConfigData.readyState == 4 && CDIConfigData.status == 200) {
                DisplayCDIAudit(data);
                console.log("-------- request processed")
            } else {
                console.log("-------- request failed readyState="+CDIConfigData.readyState+" CDIConfigData.status="+CDIConfigData.status)
            }
        });
 
        /* CCL Development */
        /*
        var CDIConfigData = window.external.XMLCclRequest();
 
 
        CDIConfigData.open("GET","cov_cdi_query_audit",false);
        CDIConfigData.send("~MINE~,~DEFINITIONS~");
      	var CDIConfigJSON = JSON.parse(CDIConfigData.responseText)
 
        if (CDIConfigData.readyState == 4 && CDIConfigData.status == 200) {
            console.log("-------- request processed")
            DisplayCDIAudit(CDIConfigJSON)
        } else {
 
            console.log("-------- request failed readyState="+CDIConfigData.readyState+" CDIConfigData.status="+CDIConfigData.status)
        }
        */
    </script>
 
</body>
</html>